@startuml
actor User
participant Game
participant Board
participant Paddle
participant Ball
participant Brick

User -> Game: Start Game
note right of Game: Rule 2
Game -> Board: Initialize board (300 pixels x 200 pixels)
note right of Game: Rule 3
Game -> Ball: Initialize ball (10 pixels diameter)
Game -> Brick: The bricks have the size 10 pixels x 20 pixels
note right of Game: Rule 7
Game -> Brick: Each brick must be either blue, red, or gold and is sized single or double
note right of Game: Rule 8
Game -> Brick: A brick is sized single (20 x 10 pixels) or double (40 x 10 pixels)
note right of Game: Rule 9
Game -> Brick: Blue bricks are destroyed with one hit, red bricks require two hits, gold bricks require three hits
note right of Game: Rule 11
Game -> Paddle: Initialize paddle at the center of bottom of the board (10 pixels x 20 pixels)
Game -> Paddle: The paddle only moves horizontally on the bottom of the board, controlled by the user by left and right arrow keys.
Game -> Paddle: The paddle always stays inside the board. 
note right of Game: Rule 16
Game -> User: User has 3 lives

note right of User: Rule 1
loop 33 times (33 levels)
  alt First level
    note right of Game: Rule 10
    Game -> Brick: Initialize 50 single blue bricks in the upper third of the board, randomly placed
  end
  note right of Game: Rule 11
  Game -> Paddle: Reset the paddle position to center of bottom border
  note right of Game: Rule 4
  Game -> Ball: Start ball movement (From top left corner, with 45 degrees downwards angle and 5 pixels/second speed)
  
  note right of User: Rule 6
  loop While bricks remaining
    note right of User: Rule 5
    User -> Paddle: Move paddle
    note right of Ball: Rule 12
    Ball -> Paddle: Check collision
    alt Ball hits paddle
      note right of Ball: Rule 5
      Ball -> Ball: Change direction with the same angle of incident to upward
    end
    Ball -> Board: Check collision
    alt Ball hits board border (not bottom border)
      Ball -> Ball: Change direction with the same angle of incident
    end
    alt Ball falls off bottom
      note right of Ball: Rule 17
      Ball -> Game: Lose life
      note right of User: Rule 18
      alt Lives remaining
        Game -> Board: Restart level
      else
        Game -> User: Game over
        User -> Game: Play again?
        note right of Game: Rule 19
        alt User wants to play again
          Game -> Game: Restart game from level 1
        else
          Game -> Game: End game
        end
      end
    end
    Ball -> Brick: Check collision
    alt Ball hits brick
      note right of Ball: Rule 12
      Brick -> Ball: Change direction with the same angle of incident
      Brick -> Brick: Reduce brick strength
      alt Brick destroyed
        Brick -> Game: Update score
      end
    end
  end
  note right of Game: Rule 6
  Game -> Game: Level complete
  note right of Game: Rule 14
  Game -> Board: Configure next level (Add 2 red bricks and 1 gold brick to the prev. brick arrangement)
  note right of Game: Rule 15
  Game -> Board: Initialize the next level's bricks' locations in the upper third of the board randomly
  Game -> Board: Initialize the next level's bricks' sizes (single or double) randomly
  note right of Game: Rule 13
  Game -> Ball: Increase ball speed by 1 pixel per second
end
@enduml